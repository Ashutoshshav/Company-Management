<link href="~/css/partydetails.css" rel="stylesheet" />

@* <style> *@
@*     /* Global Styles */ *@


@*     /* Container */ *@
@*     .maincontainer { *@
@*         width: 70%; *@
@*         margin: 110px auto 0 auto; *@
@*     } *@

@*     /* Card */ *@
@*     .card { *@
@*         background: #ffffff; *@
@*         box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); *@
@*         border-radius: 10px; *@
@*         overflow: hidden; *@
@*     } *@

@*     /* Card Header */ *@
@*     .card-header { *@
@*         background: #31708F; *@
@*         color: white; *@
@*         text-align: center; *@
@*         padding: 15px; *@
@*         font-size: 20px; *@
@*     } *@

@*     /* Card Body */ *@
@*     .card-body { *@
@*         padding: 10px 20px; *@
@*     } *@

@*     /* Form Styles */ *@
@*     .form-row { *@
@*         display: flex; *@
@*         gap: 20px; *@
@*         margin-bottom: 5px; *@
@*     } *@

@*     .form-group { *@
@*         flex: 1; *@
@*     } *@

@*     .full-width { *@
@*         flex: 100%; *@
@*     } *@

@*     label { *@
@*         display: block; *@
@*         margin-bottom: 1px; *@
@*     } *@

@*     input, *@
@*     textarea { *@
@*         width: 100%; *@
@*         padding: 3px; *@
@*         border: 1px solid #ccc; *@
@*         border-radius: 5px; *@
@*         font-size: 14px; *@
@*     } *@

@*     #PartyStatus { *@
@*         width: 100%; *@
@*         padding: 7px 7px; *@
@*         border: 1px solid #ccc; *@
@*         border-radius: 5px; *@
@*         font-size: 13px; *@
@*     } *@
@*     /* Submit Button */ *@
@*     .form-actions { *@
@*         text-align: center; *@
@*         margin-top: 20px; *@
@*     } *@

@*     button { *@
@*         background: #28a745; *@
@*         color: white; *@
@*         padding: 5px 20px; *@
@*         font-size: 16px; *@
@*         border: none; *@
@*         border-radius: 5px; *@
@*         cursor: pointer; *@
@*         width: 100%; *@
@*     } *@

@*         button:hover { *@
@*             background: #218838; *@
@*         } *@

@* </style> *@
@* <style> *@
@*     /* Simple modal styling */ *@
@*     #partyPopup { *@
@*         display: none; *@
@*         position: fixed; *@
@*         top: 50%; *@
@*         left: 50%; *@
@*         transform: translate(-50%, -50%); *@
@*         background: white; *@
@*         padding: 20px; *@
@*         box-shadow: 0px 0px 10px gray; *@
@*         border-radius: 5px; *@
@*         z-index: 1000; *@
@*         width: 20%; *@
@*         height: 30%; *@
@*     } *@

@*     #popupOverlay { *@
@*         display: none; *@
@*         position: fixed; *@
@*         top: 0; *@
@*         left: 0; *@
@*         width: 100%; *@
@*         height: 100%; *@
@*         background: rgba(0, 0, 0, 0.5); *@
@*         z-index: 999; *@
@*     } *@
@*     #partyPopup h3{ *@
@*         text-align: center; *@
@*     } *@
@*     #partyPopup p{ *@
@*         text-align: center; *@
@*         margin: 10px; *@
@*     } *@

@*     #partyPopup .circle { *@
@*         width: 40px; *@
@*         height: 40px; *@
@*         border-radius: 50%; *@
@*         border: 2px solid black; *@
@*         display: flex; *@
@*         align-items: center; *@
@*         justify-content: center; *@
@*         font-size: 20px; *@
@*         font-weight: bold; *@
@*         color: black; *@
@*         background: #3ce85e; *@
@*         margin: 15px auto; *@
@*     } *@
    
@* </style> *@
<div class="maincontainer">
    <div class="card">
        <div class="card-header">
            <h3>Party Details</h3>
        </div>
        <div class="card-body">
            <form id="partyForm">
                <div class="form-row">
                    <div class="form-group">

                        <label>Party Name:</label>
                        <input type="text" id="PartyName" name="PartyName" required>


                        <label>Contact Person:</label>
                        <input type="text" id="ContactPerson" name="ContactPerson">

                        <label>Party Status:</label>
                        <select id="PartyStatus" name="PartyStatus" required>
                            <option value="">Select Status</option>
                            <option value="1">Customer</option>
                            <option value="2">Vender</option>
                            <option value="3">Customer + Vender</option>
                        </select>
                        
                    </div>

                    <div class="form-group">
                        <label>Address:</label>
                        <textarea id="Address" name="Address" rows="3" style="height: 136px;" placeholder="Address "></textarea>
                       
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Contact No:</label>
                        <input type="text" id="ContactNo" name="ContactNo">
                        <label>GST No:</label>
                        <input type="text" id="GSTNo" name="GSTNo">
                        <label>PAN No:</label>
                        <input type="text" id="PANNo" name="PANNo">
                    </div>

                    <div class="form-group">
                        <label>Bank Details:</label>
                        <textarea id="Bank" name="Bank" rows="3" style="height: 136px;" placeholder="Bank Name,Account No, IFSC Code "></textarea>

                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">

                        <label>Email:</label>
                        <input type="email" id="Email" name="Email">

                        <label>Department:</label>
                        <input type="text" id="Department" name="Department">
                    </div>
                    <div class="form-group">
                        <label>Remark:</label>
                        <textarea id="Remark" name="Remark" placeholder="Remark" rows="3" style="height: 83px;"></textarea>
                    </div>
                </div>




                <input type="hidden" id="PartyID" name="PartyID" readonly>
               

                <div class="form-actions">
                    <button type="submit" class="submit-btn">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Pop-up Modal -->
<div id="popupOverlay"></div>
<div id="partyPopup">
    <div class="circle">&#10004;</div>
    <h3>Party Saved Successfully!</h3>
    <p>Party ID: <span id="popupPartyID"></span></p>
    <button onclick="closePopup()" class="submit-btn">OK</button>
</div>



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {
          $(document).ready(function () {
            $.ajax({
                url: '/Challan/GetID',
                type: 'GET',
                dataType: 'json',
                success: function (response) {
                    $('#PartyID').val(response.partid + 1 );
                },
                error: function () {
                    console.log('Error fetching ID');
                }
            });
        });

        $("#partyForm").submit(function (e) {
            e.preventDefault();

            var formData = $(this).serialize();

            $.ajax({
                type: "POST",
                url: "/Challan/SaveParty",
                data: formData,
                  success: function (response) {
                    if (response.success) {
                        $("#PartyID").val(response.partyID); // Set hidden field
                        $("#popupPartyID").text(response.partyID);
                        showPopup(); // Show pop-up
                    } else {
                        alert("Error: " + response.message);
                    }
                },
                error: function () {
                    alert("Error: " + response.message);
                }
            });
        });

    

    });
    function showPopup() {
        $("#popupOverlay").show();
        $("#partyPopup").show();
    }

    function closePopup() {
        $("#popupOverlay").hide();
        $("#partyPopup").hide();
        location.reload();
    }
</script>
